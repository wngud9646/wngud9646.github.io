---
title:  "EC2, 스토리지, RDS"
excerpt: "DevOps 부트캠프 Section 2 "

categories:
  - Blog
tags:
  - [Blog, DevOps]

toc: true
toc_sticky: true
 
date: 2023-04-14
last_modified_at: 2023-04-14
---
# EC2
## 인스턴스(Instance)
EC2 서비스에서 제공하는 가상 컴퓨팅 환경으로, 가상 머신(VM)을 실행할 수 있는 서버입니다. <br>
AWS Instance는 원하는 운영 체제, 언어, 데이터베이스, 응용 프로그램 등을 설치하고 실행할 수 있습니다.

AWS Instance는 필요에 따라 인스턴스 유형, 용량, CPU 및 메모리 구성 등 다양한 속성을 선택할 수 있습니다. <br>
예를 들어, 일반적인 웹 서버를 실행할 경우에는 CPU와 메모리가 적당한 t2.micro 인스턴스를 선택할 수 있습니다. <br>
반면에 더 큰 규모의 데이터베이스 작업이나 머신러닝 등의 작업을 수행할 경우에는 더 많은 CPU와 메모리가 있는 인스턴스를 선택할 수 있습니다.

AWS Instance는 EC2 인스턴스 시작 템플릿(AMI)을 사용하여 시작됩니다. <br>
AMI는 운영 체제, 소프트웨어, 구성 등을 포함한 인스턴스 구성을 정의하는 템플릿입니다. <br>
따라서 AMI를 사용하여 인스턴스를 시작하면 빠르게 운영 체제와 소프트웨어를 설치하고 구성할 수 있습니다

<br><br>

### 인스턴스의 유형
- 범용 인스턴스 (General Purpose Instances): 이 유형의 인스턴스는 다양한 애플리케이션에 적합합니다. <br>
CPU와 메모리를 균형있게 조합하여 중요한 애플리케이션을 지원할 수 있습니다. 예를 들면 t3, m5 등이 있습니다.

- 컴퓨팅 최적화 인스턴스 (Compute Optimized Instances): 이 유형의 인스턴스는 CPU 집약적인 애플리케이션에 최적화되어 있습니다. <br>
대규모 데이터베이스, 배치 처리, 머신 러닝 등의 작업을 처리하는 데 적합합니다. <br>
예를 들면 c5, c4 등이 있습니다.

- 메모리 최적화 인스턴스 (Memory Optimized Instances): 이 유형의 인스턴스는 메모리 집약적인 애플리케이션에 최적화되어 있습니다.<br> 
대규모 데이터베이스, 인 메모리 캐싱, 빅 데이터 분석 등에 적합합니다. <br>
예를 들면 r5, x1e 등이 있습니다.

- 스토리지 최적화 인스턴스 (Storage Optimized Instances): 이 유형의 인스턴스는 대용량 데이터 처리 및 스토리지 작업에 최적화되어 있습니다. <br>
매우 큰 데이터베이스, Hadoop, 데이터 웨어하우스 등에 적합합니다. <br>
예를 들면 i3, d2 등이 있습니다.

- 가속화된 컴퓨팅 인스턴스 (Accelerated Computing Instances): 이 유형의 인스턴스는 GPU 또는 FPGA를 사용하여 과학 및 엔지니어링 계산, 머신 러닝 등에 최적화되어 있습니다.<br> 
예를 들면 p3, g4 등이 있습니다.

- 초고속 네트워킹 인스턴스 (High Performance Networking Instances): 이 유형의 인스턴스는 초고속 네트워크 인터페이스를 사용하여 대규모 병렬 처리 및 머신 러닝 등에 최적화되어 있습니다.<br> 
예를 들면 h1, c5n 등이 있습니다.

<br><br>

## 라이프사이클 상태
- Pending: 인스턴스가 시작 중인 상태. 인스턴스를 시작하려면 AMI(Amazon Machine Image), 인스턴스 유형, 네트워크 및 보안 구성 등 다양한 구성 요소를 지정해야 합니다.
  - 과금 여부: 인스턴스가 실행되지 않으므로 과금이 발생하지 않습니다.
- Running: 인스턴스가 실행 중인 상태. 인스턴스는 실행 중인 AMI에 따라 구성되며, 사용자 지정 애플리케이션 및 서비스를 설치할 수 있습니다.
  - 과금 여부: 인스턴스가 실행 중인 동안 계속 과금됩니다.
- Stopping: 인스턴스를 중지하는 상태. 인스턴스가 중지되기 전에 모든 작업을 완료하고, 데이터를 저장하고, 이전을 완료해야 합니다.
  - 과금 여부: 인스턴스가 중지될 때까지 과금이 계속됩니다.
- Stopped: 인스턴스가 중지된 상태. 이 상태에서는 인스턴스를 시작할 수 있습니다.
  - 과금 여부: 인스턴스가 중지된 동안에는 과금이 발생하지 않습니다.
- Terminating: 인스턴스를 종료하는 상태. 이 상태에서는 인스턴스를 다시 시작할 수 없습니다.
  - 과금 여부: 인스턴스가 종료될 때까지 과금이 계속됩니다.
- Terminated: 인스턴스가 종료된 상태.
  - 과금 여부: 인스턴스가 종료된 후에는 과금이 발생하지 않습니다.

<br><br>

## 인스턴스 구매 옵션
1. 온디맨드 인스턴스
- 시간 단위로 과금되는 인스턴스입니다.
- 사용한 시간만큼 과금되며, 시작/종료 시간을 제어할 수 있습니다.
- 예약 인스턴스나 스팟 인스턴스보다는 높은 비용이 듭니다.
2. 예약 인스턴스
- 미리 인스턴스를 예약해 놓고 할인된 비용으로 사용하는 인스턴스입니다.
- 1년 또는 3년 단위로 예약할 수 있으며, 인스턴스 유형, 가용 영역, 인스턴스 수 등을 지정할 수 있습니다.
- 사용이 보장되지 않는 스팟 인스턴스보다는 안정적이지만, 유연성은 떨어집니다.
3. 스팟 인스턴스
- 경매 방식으로 과금되는 인스턴스입니다.
- 시장 가격에 따라 비용이 결정되며, 시장 가격보다 높은 가격을 제시하면 인스턴스를 사용할 수 있습니다.
- 비용이 저렴하지만, 인스턴스 사용이 보장되지 않기 때문에 유연성이 높아야 하는 경우에 사용됩니다.

<br><br>

## 인스턴스 루트 디바이스
인스턴스 루트 디바이스는 인스턴스가 부팅될 때 사용되는 디바이스를 의미합니다. <br>
이 디바이스에는 인스턴스 운영 체제가 설치되어 있으며, 인스턴스의 데이터와 애플리케이션도 이 디바이스에 저장됩니다.

인스턴스 루트 디바이스는 인스턴스 유형에 따라 다양합니다. <br>

Amazon Machine Image(AMI)를 사용하여 인스턴스를 시작할 때 AMI에 정의된 인스턴스 루트 디바이스를 사용할 수 있습니다. <br>
인스턴스 루트 디바이스를 수정하려면 새로운 인스턴스를 시작하거나, 기존 인스턴스의 루트 디바이스를 변경해야 합니다.

<br>

### EBS 기반 인스턴스
EBS(Elastic Block Store) 기반 인스턴스는 인스턴스에 연결된 EBS 볼륨을 통해 데이터를 저장합니다.<br> 
EBS는 네트워크 스토리지로, 인스턴스와 별개로 존재하며, 높은 내구성과 안정성을 보장합니다.<br> 
EBS 기반 인스턴스는 인스턴스 종료와 상관없이 데이터를 보존할 수 있고, 스냅샷을 사용해 백업하거나 다른 지역으로 복사할 수도 있습니다. <br>
EBS 볼륨의 크기와 유형은 필요에 따라 유연하게 조정할 수 있습니다. <br>
EBS 기반 인스턴스는 다른 인스턴스 유형과 마찬가지로 On-Demand, Reserved, Spot Instance 등의 구매 옵션을 제공하며, 사용한 용량에 대해 과금됩니다.

<br>

### 인스턴스 스토어 기반
인스턴스 스토어 기반은 인스턴스가 호스팅되는 호스트 장비의 로컬 스토리지를 이용하여 인스턴스에 블록 수준의 스토리지를 제공하는 방식입니다. <br>
이는 고성능, 저레이턴시 및 높은 처리량을 요구하는 애플리케이션에 유리합니다.

인스턴스 스토어 기반 인스턴스는 EC2 인스턴스 중에서도 특별한 종류의 인스턴스로, 인스턴스 스토어 볼륨을 이용하여 로컬 스토리지에 데이터를 저장하고 처리합니다. <br>
다른 인스턴스 유형과 달리 재부팅하거나 정지되면 데이터가 영구적으로 손실되기 때문에, 이러한 인스턴스는 일반적으로 임시적인 데이터 저장소 또는 캐시 서버로 사용됩니다.

인스턴스 스토어 기반 인스턴스는 EBS 기반 인스턴스와 비교하여 높은 IO 성능을 제공하지만, 데이터를 백업하거나 확장하는 등의 관리 작업이 불가능합니다. <br>
또한 이러한 인스턴스는 특정 AMI에서만 사용 가능하며, 선택적으로 사용할 수 있습니다.

<br>

## EC2 보안
- 보안 그룹: 인스턴스의 인바운드 및 아웃바운드 트래픽을 제어하는 가상 방화벽입니다.
- IAM 역할: 인스턴스에서 실행되는 애플리케이션이 AWS 리소스에 액세스하도록 권한을 부여하는 데 사용됩니다.
- SSH 키 페어: 인스턴스에 대한 인증 및 보안을 위한 SSH 키 페어를 사용합니다.
- Amazon VPC: 가상 사설 클라우드를 제공하여 인스턴스가 외부 인터넷과 분리되어 있는 네트워크 환경을 제공합니다.
- Amazon EBS 암호화: 인스턴스에 연결된 Amazon EBS 볼륨을 암호화하여 데이터 보호를 강화합니다.
- AWS Certificate Manager: SSL/TLS 인증서를 생성, 발급 및 관리하는 데 사용됩니다.
- AWS WAF: 웹 애플리케이션 방화벽으로, 악성 트래픽을 탐지하여 차단합니다.

<br>

### SSH 키 페어
AWS에서 인스턴스를 시작할 때, 사용자는 SSH를 사용하여 인스턴스에 로그인할 수 있습니다.<br> 
이 때, 인스턴스를 시작할 때 설정한 키 페어를 사용하여 인증을 수행할 수 있습니다. <br>
키 페어는 공개 키와 비공개 키의 쌍으로 구성되며, 공개 키는 인스턴스에 배포되고 비공개 키는 사용자가 보관합니다. <br>
이를 이용해 인스턴스에 접속할 때, 사용자는 비공개 키를 사용하여 SSH 인증을 수행합니다.<br> 이를 통해 보안성을 높일 수 있습니다.

<br>

### 보안 그룹
보안 그룹(Security Group)은 인바운드와 아웃바운드 네트워크 트래픽을 제어하는 가상 방화벽 역할을 합니다. <br>
보안 그룹은 AWS VPC(Virtual Private Cloud)에서 EC2 인스턴스에 대한 네트워크 트래픽을 제어할 수 있는 중요한 수단 중 하나입니다.

보안 그룹은 인바운드 트래픽과 아웃바운드 트래픽에 대해 각각 다른 규칙을 지정할 수 있으며, 특정 IP 주소, IP 범위, 프로토콜, 포트 등을 기반으로 트래픽을 허용하거나 거부할 수 있습니다. <br>
또한 하나의 보안 그룹을 여러 EC2 인스턴스에 할당할 수 있습니다.

예를 들어, 인바운드 트래픽으로 HTTP 요청을 받는 EC2 인스턴스가 있다면, 보안 그룹 설정에서 HTTP 프로토콜과 포트 80을 허용하는 규칙을 추가해야 합니다. <br>
이를 통해 허용된 IP 주소에서만 HTTP 요청을 받을 수 있도록 제한할 수 있습니다.

보안 그룹은 EC2 인스턴스를 시작할 때 선택하거나, 인스턴스가 실행 중일 때 수정할 수 있습니다. 또한 VPC에 대한 디폴트 보안 그룹이 있으며, 필요에 따라 보안 그룹을 추가하거나 수정하여 보안 수준을 높일 수 있습니다.

<br>

#### 인바운드와 아웃바운드
인바운드 트래픽은 외부에서 EC2 인스턴스로 들어오는 네트워크 트래픽을 의미합니다. <br>
예를 들어, 인터넷을 통해 웹 서버에 접속하는 경우 웹 서버로 들어오는 트래픽은 인바운드 트래픽입니다.

아웃바운드 트래픽은 EC2 인스턴스에서 외부로 나가는 네트워크 트래픽을 의미합니다. <br>
예를 들어, 웹 서버가 인터넷을 통해 데이터베이스 서버에 데이터를 요청하는 경우 데이터베이스 서버로 나가는 트래픽은 아웃바운드 트래픽입니다.

<br>

## EC2 네트워킹
EC2는 가상 머신 인스턴스를 제공하며, 각 인스턴스는 자체 IP 주소를 갖고 있습니다.<br> 
이를 통해 EC2 인스턴스는 인터넷 또는 VPC 내에서 서로 통신할 수 있습니다.

EC2 인스턴스는 VPC (Virtual Private Cloud) 내에 배치됩니다.<br>  
VPC는 AWS 클라우드 내의 가상 네트워크이며, EC2 인스턴스와 다른 AWS 서비스 간에 안전하고 프라이빗한 통신을 할 수 있도록 지원합니다.<br>  
VPC를 사용하면 고객은 AWS에서 자체 IP 주소 범위, 서브넷, 라우팅 테이블 및 네트워킹을 구성할 수 있습니다.

<br>

### 프라이빗 IPv4
프라이빗 IPv4 주소는 인터넷에서 직접 접근이 불가능한 비공개적인 IP 주소를 말합니다. 
<br>
이 주소는 특정 네트워크나 VPC(Virtual Private Cloud) 내에서만 사용되며, 인터넷에서 접근할 수 없습니다. 

AWS에서는 각 VPC에서 사용 가능한 범위의 프라이빗 IPv4 주소를 제공합니다. <br>
이를 통해 VPC 내부에서 인스턴스 간 통신을 할 수 있습니다. 또한, 서로 다른 VPC 간에도 VPC Peering이라는 기능을 통해 프라이빗 IPv4 주소를 이용한 안전하고 비공개적인 통신이 가능합니다.

프라이빗 IPv4 주소는 VPC 내에서 사용되기 때문에 공개적으로 노출되지 않습니다. <br>
따라서, 보안에 더 많은 안정성을 제공합니다.<br> 
또한, AWS Direct Connect와 VPN(Virtual Private Network)을 사용하여 VPC와 온프레미스 환경 간의 연결을 안전하게 설정할 수 있습니다.

<br>

### 퍼블릭 IPv4
퍼블릭 IPv4는 인터넷에서 접근 가능한 공개적인 IP 주소입니다. <br>
이 주소를 통해 인스턴스에 접근할 수 있습니다. <br>
예를 들어, 사용자가 웹 사이트에 접속하면 사용자의 브라우저는 웹 사이트의 퍼블릭 IPv4 주소를 찾아서 접속합니다.

EC2 인스턴스를 시작하면 기본적으로 퍼블릭 IPv4 주소가 할당됩니다. <br>
이 주소는 EC2 인스턴스가 시작되고 나서만 사용 가능하며, 중지되면 해제됩니다. <br>
다시 시작하면 새로운 퍼블릭 IPv4 주소가 할당됩니다.<br>

고정된 퍼블릭 IPv4를 사용하고 싶다면, 인스턴스에 연결된 Elastic IP 주소를 할당해야 합니다. <br>
Elastic IP는 고정된 공인 IP 주소로, 인스턴스가 종료되더라도 유지됩니다.

<br>

### Elastic IP
Elastic IP는 AWS에서 제공하는 고정 IP 주소입니다. <br>
EC2 인스턴스에 할당하여 사용할 수 있으며, 인스턴스를 중지하고 다시 시작하거나, 다른 인스턴스로 교체해도 IP 주소를 유지할 수 있습니다.

Elastic IP를 사용하면, 인스턴스가 변경되어도 IP 주소를 변경하지 않아도 되므로, 사용자는 해당 인스턴스에 대한 DNS 변경을 수행하지 않고도 접근할 수 있습니다. <br>
또한 Elastic IP를 사용하면 IP 주소를 할당받을 때마다 요금이 부과되므로, 사용 중지 시 반납하여 비용을 절감할 수 있습니다.

<br><br><br>

# 스토리지
## 블록 스토리지
블록 스토리지(Block Storage)는 데이터를 블록 단위로 저장하는 스토리지 서비스입니다.<br> 
블록 스토리지는 서버의 디스크와 같은 역할을 하며, EC2 인스턴스에 연결하여 사용할 수 있습니다. <br>
블록 스토리지는 스냅샷, 볼륨 크기 변경 등의 기능을 제공하므로, EC2 인스턴스에서 사용하는 데이터를 백업하거나 볼륨 크기를 조정하는 등의 용도로 활용됩니다. <br>
AWS의 대표적인 블록 스토리지 서비스로는 Amazon Elastic Block Store(EBS)가 있습니다.

<br>

## 파일 스토리지
파일 스토리지는 Amazon Elastic File System (EFS)를 이용합니다. <br>
EFS는 AWS 클라우드에서의 다중 AZ(multi-AZ) 파일 스토리지 서비스입니다. <br>
이를 이용하여 여러 EC2 인스턴스에서 동시에 파일을 공유하고 읽고 쓸 수 있습니다. <br>
EFS는 NFSv4 프로토콜을 이용하여 블록 스토리지에 비해 더 높은 수준의 파일 시스템 액세스를 제공합니다. <br>
또한 EFS는 유연한 확장성과 탄력성을 제공하며 필요에 따라 스토리지 용량을 자동으로 증가시키거나 감소시킬 수 있습니다.

<br>

### NFSv4
NFSv4(Network File System version 4)는 분산 파일 시스템 프로토콜 중 하나로, 다양한 운영 체제에서 파일 공유를 지원하며 네트워크를 통해 여러 클라이언트에서 파일에 동시에 액세스할 수 있도록 해줍니다.

<br>

## 객체 스토리지
객체 스토리지는 객체를 저장하는 데 사용되는 분산 스토리지 시스템입니다. <br>
각 객체는 메타데이터와 실제 데이터로 구성되며, 일반적으로 대량의 비정형 데이터를 저장하는 데 사용됩니다. <br>
객체 스토리지는 대규모 데이터 집합을 효율적으로 저장, 관리, 보호하고 검색하는 데 사용됩니다. <br>
AWS의 S3(Simple Storage Service)가 대표적인 객체 스토리지 서비스입니다.



### 객체, 블록, 파일 스토리지의 차이점과 장단점
객체 스토리지<br>
장점:
- 대규모 및 비정형 데이터 저장에 적합합니다.
확장성이 높습니다.
- 저렴한 비용으로 데이터를 저장할 수 있습니다.

단점:
- 객체 데이터를 검색하기 위해서는 일반적으로 메타데이터에 대한 추가 노력이 필요합니다.
- 객체 데이터에 대한 전용 API가 필요합니다.

블록 스토리지<br>
장점:
- 높은 처리량과 안정성이 필요한 애플리케이션에 적합합니다.
- 데이터 무결성을 보장합니다.

단점:
- 확장성이 낮습니다.
- 블록 레벨 복제를 수행하는 경우 디스크 공간을 더 많이 차지합니다.

파일 스토리지<br>
장점:
- 기존 애플리케이션 및 프로토콜을 지원합니다.
- 파일 공유와 같은 다양한 용도에 적합합니다.

단점:
- 대규모 및 비정형 데이터 저장에는 적합하지 않습니다.
- 확장성이 낮습니다.

<br><br>

## S3
Amazon Simple Storage Service (S3)는 AWS의 객체 스토리지 서비스입니다.<br>
S3는 무제한 용량의 파일 저장소로 사용할 수 있으며, 전 세계 어디서나 원활한 데이터 전송을 제공합니다. <br>
또한 데이터의 안정성과 보안성을 보장하기 위해 여러 가지 기능을 제공합니다.

S3의 주요 특징과 장점은 다음과 같습니다:

- 무한한 용량: S3는 무한한 용량을 가지고 있으므로, 매우 큰 파일을 저장하거나 많은 양의 데이터를 저장할 수 있습니다.
- 안정성: S3는 여러 개의 가용 영역(Availability Zone)에 데이터를 복제하므로 데이터의 안정성이 높습니다. 이를 통해 장애 발생 시 데이터 손실이 최소화됩니다.
- 보안성: S3는 데이터 암호화, 버킷 정책, 객체 레벨의 ACL 등 다양한 보안 기능을 제공하여 데이터의 안전한 보호를 보장합니다.
- 스케일링: S3는 필요에 따라 자동으로 스케일링되어 대규모 데이터 처리에 적합합니다.
- 저렴한 비용: S3는 데이터 저장용으로 매우 저렴한 비용을 제공하며, 다양한 요금제를 통해 비용을 효율적으로 관리할 수 있습니다.
- 유연성: S3는 REST API를 사용하여 다양한 애플리케이션과 통합할 수 있으며, 다양한 클라이언트 라이브러리를 제공합니다.
- 높은 가용성: S3는 99.999999999%의 데이터 내구성을 보장하며, 높은 가용성을 제공합니다.
- 다양한 용도: S3는 백업 및 복원, 정적 웹 호스팅, 미디어 저장, 애플리케이션 데이터 저장 등 다양한 용도로 사용될 수 있습니다.

<br>

### 클라우드 스토리지란
클라우드 스토리지는 인터넷을 통해 데이터를 저장, 관리, 백업, 검색할 수 있도록 하는 저장소 서비스입니다. 클라우드 스토리지는 일반적으로 물리적으로 액세스할 수 없는 외부 데이터 센터에 저장됩니다.

<br>

### 버킷(bucket)
AWS S3에서 데이터를 저장하는 단위를 버킷(bucket)이라고 합니다. <br>
각 버킷은 해당 리전에서 유일한 이름을 가지며, 버킷 내부에서 객체(object)라는 이름으로 데이터를 저장합니다. <br>
버킷은 계정 내에서 생성하며, 필요에 따라 버킷에 대한 액세스 권한을 설정할 수 있습니다. <br>
버킷은 일반적으로 회사, 조직 또는 프로젝트와 같은 단위로 구성됩니다.

<br>

### 객체(object)
Amazon S3에서는 모든 데이터를 객체(object)로 저장합니다. <br>
객체는 데이터와 메타데이터의 조합으로 이루어져 있습니다. <br>
데이터는 실제로 저장하려는 파일 또는 객체이고, 메타데이터는 데이터에 대한 설명 정보를 포함합니다. <br>
예를 들어, 객체의 메타데이터는 객체의 이름, 소유자, 마지막 수정 날짜, 크기 등을 포함할 수 있습니다.

객체는 S3 버킷에 저장됩니다. S3 버킷은 모든 객체를 저장하는 컨테이너입니다. <br>
객체의 이름은 해당 객체가 저장된 버킷 내에서 고유해야 합니다. <br>
객체는 일반적으로 HTTP 또는 HTTPS를 통해 접근할 수 있습니다. <br>
따라서 객체는 웹 서비스에서 사용되는 정적 파일 또는 웹 사이트의 이미지 파일과 같은 파일로 사용됩니다.

<br>

#### 정적파일 동적파일
정적 파일(static file)은 서버 측에서 생성되지 않고, 클라이언트에게 그대로 전송되는 파일을 의미합니다. <br>
대표적으로 HTML, CSS, JavaScript, 이미지, 비디오 등이 있으며, 서버에서 미리 생성되어 있는 파일을 그대로 전송하기 때문에 클라이언트에서는 별도의 처리 없이 바로 열람할 수 있습니다. <br>
반면 동적 파일(dynamic file)은 서버 측에서 생성되는 파일로, 서버에서 요청에 맞게 데이터를 처리한 후 클라이언트에게 전송됩니다. <br>
예를 들어, 사용자가 로그인을 하면 서버에서는 해당 사용자의 정보를 가져와 동적으로 화면을 생성하여 전송합니다.

<br>

### 접근성 통제
접근성 통제는 특정 사용자나 그룹이 데이터나 리소스에 대해 접근할 수 있는 권한을 제어하는 것을 의미합니다. <br>
AWS S3에서는 버킷과 객체에 대한 액세스를 제어하기 위해 다양한 방법으로 접근성 통제를 설정할 수 있습니다.

가장 일반적인 방법은 AWS Identity and Access Management (IAM)을 사용하여 사용자 또는 그룹의 권한을 관리하는 것입니다. <br>
IAM을 사용하면 버킷 또는 객체에 대한 액세스 권한을 지정할 수 있으며, IAM 정책을 사용하여 다른 사용자나 그룹과 공유할 수 있습니다.

또한, 버킷 정책을 사용하여 특정 IP 주소 또는 VPC에서의 액세스를 제한하거나, 객체에 대한 Pre-Signed URL을 생성하여 일시적으로 액세스를 허용할 수 있습니다. <br>
이외에도 S3 Access Points를 사용하여 버킷에 대한 액세스를 제어하는 것이 가능합니다.

<br>

#### 버킷 정책
AWS S3 버킷은 AWS 리소스에 대한 액세스를 제어하는 데 사용되는 버킷 정책(bucket policy)을 사용할 수 있습니다.<br> 
버킷 정책은 S3 버킷에 대한 액세스를 제어하며, IAM 정책과는 다른 구조를 가지고 있습니다.

버킷 정책은 JSON 형식으로 작성되며, 버킷 자체에 대한 액세스를 제어하거나, 특정 객체에 대한 액세스를 제어하는 데 사용될 수 있습니다. <br>
버킷 정책을 사용하면 다음과 같은 작업을 수행할 수 있습니다.

- 버킷에 대한 액세스를 제한합니다.
- 특정 IP 주소 또는 범위에서의 액세스를 제한합니다.
- 특정 기간 동안에만 객체에 대한 액세스를 제한합니다.
- 특정 HTTP referrer 또는 사용자 에이전트에서의 액세스를 제한합니다.
- AWS 계정 또는 IAM 사용자에게 특정 작업의 권한을 부여합니다.

버킷 정책은 IAM 정책과 함께 사용될 수 있으며, IAM 정책은 AWS 계정의 모든 리소스에 대한 액세스를 제어할 수 있습니다. <br>
버킷 정책은 S3 버킷에 대한 액세스를 제어할 수 있습니다.

```
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "AllowPublicRead",
            "Effect": "Allow",
            "Principal": "*",
            "Action": [
                "s3:GetObject"
            ],
            "Resource": [
                "arn:aws:s3:::<버킷이름>/*"
            ]
        },
        {
            "Sid": "DenyAllObjectDeletion",
            "Effect": "Deny",
            "Principal": {
                "AWS": "<AWS계정번호>"
            },
            "Action": [
                "s3:DeleteObject"
            ],
            "Resource": [
                "arn:aws:s3:::<버킷이름>/*"
            ]
        }
    ]
}
```

- Version: 버킷 정책의 버전을 나타냅니다. 현재는 2012-10-17이 최신 버전입니다.
- Statement: 버킷 정책에서 사용되는 규칙들의 리스트입니다.
- Sid: 규칙을 식별하기 위한 문자열입니다.
- Effect: Allow 또는 Deny 값을 갖습니다. Allow는 규칙을 적용하는 것을 허용하고, Deny는 규칙을 적용하는 것을 거부합니다.
- Principal: 규칙을 적용할 대상을 지정합니다. *는 모든 사용자를 의미하며, AWS는 AWS 계정 번호를 지정합니다.
- Action: 규칙이 적용될 S3 작업을 지정합니다. 예를 들어 s3:GetObject는 객체를 가져오는 작업을 의미합니다.
- Resource: 규칙이 적용될 S3 리소스를 지정합니다. arn:aws:s3:::<버킷이름>/*는 <버킷이름> 버킷의 모든 객체를 나타냅니다.
- Condition : 조건이 충족되는 경우에는 해당 정책을 적용시킬 수 있습니다.

<br><br>

## 접근 정책
AWS에서의 접근 정책(Access Policy)은 AWS 리소스에 대한 접근을 규정하는 문서입니다. 
<br>이 정책은 AWS Identity and Access Management(IAM)에서 사용되며, 특정 사용자 또는 그룹에 대한 허용된 작업(Action) 및 리소스(Resource)를 지정합니다.

접근 정책은 JSON 형식으로 작성되며, 아래와 같은 구조를 가지고 있습니다.
```
{
  "Version": "문자열",
  "Statement": [
    {
      "Effect": "허용 또는 거부",
      "Action": [
        "액션1",
        "액션2",
        ...
      ],
      "Resource": "리소스 ARN",
      "Condition": {
        "Key": {
          "값1": "조건1",
          "값2": "조건2",
          ...
        }
      }
    },
    {
      "Effect": "허용 또는 거부",
      "Action": [
        "액션1",
        "액션2",
        ...
      ],
      "Resource": "리소스 ARN",
      "Condition": {
        "Key": {
          "값1": "조건1",
          "값2": "조건2",
          ...
        }
      }
    },
    ...
  ]
}
```

- "Version"은 정책의 버전을 나타내는 문자열입니다.
- "Statement"는 정책의 기본적인 빌딩 블록입니다.
- "Effect"는 허용 또는 거부 중 하나를 선택할 수 있습니다. 
- "Action"은 정책에서 허용되는 작업(Action)을 지정합니다. 
- "Resource"는 정책에서 허용되는 리소스(Resource)의 ARN을 지정합니다. 
- "Condition"은 선택적으로 사용할 수 있는 요소로, 특정 조건이 충족될 때만 작업을 수행하도록 지정할 수 있습니다.

<br>

### Identity-based policies
Identity-based policies는 AWS 계정에 연결된 Identity (사용자, 그룹, 역할 등)에 대한 권한을 제어하는 정책입니다. <br>
이러한 정책은 AWS Identity and Access Management (IAM)에서 관리됩니다.

Identity-based policies는 JSON 형식으로 작성됩니다. <br>
일반적으로 이러한 정책은 IAM 사용자, 그룹 또는 역할의 권한을 부여하는 데 사용됩니다.<br>
예를 들어, 특정 IAM 사용자에 대해 S3 버킷에서 객체를 읽고 쓰는 권한을 부여하는 정책을 작성할 수 있습니다.

Identity-based policies는 최소 권한 원칙을 적용할 수 있으므로 사용자, 그룹 또는 역할에게 필요한 최소한의 권한만 부여할 수 있습니다. <br>
또한 IAM 사용자, 그룹 또는 역할에 대한 권한을 쉽게 추가, 제거 또는 변경할 수 있습니다.

<br><br>

## S3의 보안 Best Practice
S3 버킷 및 객체의 보안을 유지하기 위한 권장 사항과 지침을 제공합니다. <br>
S3는 매우 유연한 서비스이며, 이를 제대로 구성하지 않으면 보안 위험에 노출될 수 있습니다. <br>
따라서 이러한 Best Practice를 따르면 S3 데이터를 안전하게 보호하고, 데이터 노출 및 데이터 위조, 삭제 등과 같은 보안 문제를 방지할 수 있습니다. <br>
이를 통해 기업은 고객의 민감한 데이터를 안전하게 보호하고, 규정 및 규제 준수를 보장할 수 있습니다

- 보통의 경우 S3 버킷에 대한 퍼블릭 액세스를 허용해서는 안됩니다. S3 버킷을 퍼블릭 액세스 할 수 있다는 말은 모든 파일이 아무에게나 노출될 수 있다는 의미입니다.
- 최소한의 접근 권한 전략을 사용합니다. S3 버킷에 접근해야 하는 사람에게도 관련 작업에 해당하는 만큼만 권한을 부여하고, 그외 사람에게는 접근 거부 정책을 적용합니다.
- 다중인증(MultiFactor Authentication, 이하 MFA) 시스템을 활용합니다. MFA Delete를 설정하여 데이터 삭제 권한이 없는 사람은 삭제 할 수 없도록 제한합니다.

<br><br>

## S3 스토리지 클래스
S3 Standard: 가장 일반적인 S3 스토리지 클래스로, 모든 요청에 대한 낮은 지연 시간과 높은 처리량을 제공합니다.

S3 Standard-Infrequent Access (S3 Standard-IA): Standard-IA는 Standard보다는 더 낮은 비용으로 데이터를 보관하고, 자주 액세스하지 않는 데이터를 장기 보관하는 데 사용합니다.

S3 Intelligent-Tiering: Intelligent-Tiering은 자동적으로 객체를 자주 액세스하는 빈도와 액세스하지 않는 빈도에 따라 다른 스토리지 클래스로 이동시키는 스토리지 클래스입니다.

S3 One Zone-Infrequent Access (S3 One Zone-IA): One Zone-IA는 Standard-IA보다 더 낮은 비용으로 데이터를 보관하며, Region 내 하나의 가용 영역에서만 데이터를 저장하므로 낮은 지리적 내구성을 가집니다.

S3 Glacier: S3 Glacier는 대량의 데이터를 장기 보관하는 데 사용되며, 데이터를 검색하기 위해 최소 3~5시간의 지연 시간이 소요됩니다.

S3 Glacier Deep Archive: S3 Glacier Deep Archive는 S3 Glacier보다 더 높은 용량의 데이터를 장기 보관하는 데 사용되며, 데이터를 검색하기 위해 최대 12시간의 지연 시간이 소요됩니다.

<br><br>

## Elastic Block Store (EBS)
Elastic Block Store (EBS)는 AWS의 블록 스토리지 서비스 중 하나로, EC2 인스턴스에 연결되어 사용할 수 있는 블록 수준 스토리지입니다.

EC2 인스턴스에서 EBS 볼륨을 마운트하여 인스턴스 내부에서 블록 스토리지로 사용할 수 있으며, 또한 EBS 스냅샷을 생성하고 이를 기반으로 새로운 EBS 볼륨을 생성하거나, 다른 AZ에 있는 인스턴스에 연결하여 마운트하여 사용할 수 있습니다.<br>
하나의 EC2에 여러 개의 EBS 볼륨을 부착 할 수도 있는데 이렇게 하면 부트 볼륨과 데이터 볼륨을 별도로 관리 할 수 있어서 편리합니다.

EBS 볼륨은 언제든 분리할 수 있고, 다른 EC2에 부착도 가능하지만, EBS 볼륨은 특정 AZ에 속한 자원이기도 하므로, 서로 다른 AZ(가용 영역) 간의 EC2에 EBS 볼륨을 분리하고 부착하는 것은 불가능 합니다.

EBS는 기본적으로 지연 시간이 매우 낮고 일관된 I/O 성능을 제공하며, 고성능 컴퓨팅 워크로드와 같은 I/O 집약적인 워크로드를 지원하는 다양한 볼륨 유형을 제공합니다. 또한 EBS는 스냅샷 기능을 통해 데이터의 백업과 복구, 데이터 이전 등 다양한 기능을 제공합니다.

<br>

### EBS 볼륨 유형
General Purpose SSD (gp2): 가장 많이 사용되는 유형으로, 일반적인 워크로드에 적합합니다.

Provisioned IOPS SSD (io1): 고성능을 요구하는 워크로드에 적합합니다. IOPS (입출력 작업 수)를 미리 예약할 수 있습니다.

Throughput Optimized HDD (st1): 대량의 데이터를 처리하는 워크로드에 적합합니다. 대용량 스트리밍 및 로그 처리 작업에 최적화되어 있습니다.

Cold HDD (sc1): 자주 엑세스하지 않는 데이터를 보관하는 데 적합합니다. 저비용이며, 자주 사용하지 않는 데이터를 처리하는 데 최적화되어 있습니다.

Magnetic (standard): 가장 낮은 비용의 EBS 볼륨 유형으로, 적은 양의 I/O를 처리하는 일부 워크로드에 적합합니다.

<br>

## Elastic File System(EFS)
Amazon Elastic File System(EFS)은 AWS에서 제공하는 완전 관리형 클라우드 파일 스토리지 서비스입니다. <br>
EFS는 여러 가용 영역에서 사용 가능한 파일 시스템을 제공하며, NFSv4 프로토콜을 사용하여 액세스할 수 있습니다.

EFS는 파일 스토리지를 사용하는 애플리케이션을 위해 설계되어 있으며, 여러 EC2 인스턴스에서 동시에 사용할 수 있는 공유 파일 스토리지를 제공합니다. <br>
이는 EC2 인스턴스 간에 파일을 공유하거나 여러 인스턴스에서 동시에 작업하는 애플리케이션에 특히 유용합니다.

EFS는 파일 시스템에 대한 용량 제한이 없으며, 동시에 여러 클라이언트에서 사용할 수 있으며, 필요에 따라 자동으로 확장됩니다. <br>
EFS는 또한 Amazon VPC(Virtual Private Cloud)와 함께 사용할 수 있으며, VPC 내의 EC2 인스턴스에서만 액세스할 수 있도록 보안 그룹을 사용하여 액세스를 제어할 수 있습니다.

EFS의 가장 큰 장점 중 하나는 스토리지 사용량에 대한 지불 방식입니다. EFS는 사용량에 따라 지불할 수 있는 "스토리지 용량"과 "파일 요청 수"에 따라 지불할 수 있는 "요청 수" 두 가지 비용 체계를 제공합니다. 이는 파일 시스템에 대한 용량 제한이 없으므로 스토리지를 더 유연하게 사용할 수 있습니다.


### EFS 스토리지 클래스
표준 스토리지 클래스: 가변성이 뛰어나며, 중간 수준의 대역폭과 지연 시간을 제공합니다.

강화된 스토리지 클래스: 더 높은 대역폭과 더 낮은 지연 시간을 제공하며, 데이터를 더 빠르게 액세스할 수 있습니다. 대신 더 높은 가격이 적용됩니다.

퍼포먼스 모드: 높은 대역폭과 매우 낮은 지연 시간을 제공하며, I/O 요청을 더 빠르게 처리합니다. 이 모드는 더 높은 가격이 적용되며, 동시성 제한이 있습니다.

불변 스토리지 클래스: 수정할 수 없는 파일을 위한 스토리지 클래스입니다. 적용할 수 있는 다양한 불변성 옵션으로 데이터 무결성을 보호할 수 있습니다.

<br><br><br>

# Relational Database Service (RDS)
Amazon Relational Database Service (Amazon RDS)는 사용자가 쉽게 관리, 확장 및 조정할 수 있는 클라우드 기반 관계형 데이터베이스 서비스입니다. <br>
Amazon RDS를 사용하면 사용자는 필요에 따라 처리량 또는 저장 용량을 자동으로 확장하거나 축소하여 애플리케이션 트래픽 변화에 대응할 수 있습니다. 

Amazon RDS를 사용하여 MySQL, PostgreSQL, Oracle, SQL Server, MariaDB와 같은 주요 데이터베이스 엔진을 사용하여 데이터베이스를 실행할 수 있습니다. 

데이터베이스를 설정, 운영, 확장 및 보호하는 데 필요한 일부 복잡성과 작업을 단순화하므로 개발자는 애플리케이션 개발에 더 많은 시간을 투자할 수 있습니다. RDS는 또한 API나 콘솔을 통해 쉽게 관리할 수 있습니다.

RDS는 데이터베이스 인스턴스를 배포, 운영, 확장, 관리할 수 있으며, 높은 가용성, 자동 백업, 보안 그리고 모니터링 기능 등 다양한 기능을 제공합니다. 또한 필요에 따라 데이터베이스 인스턴스의 용량을 유연하게 조정할 수 있습니다.

<br>

## RDS의 이점
쉬운 관리: RDS는 Amazon이 관리하는 완전 관리형 서비스입니다. 이는 데이터베이스 업그레이드, 패치 및 백업과 같은 작업을 수행할 필요 없이 데이터베이스 인스턴스를 생성하고 운영할 수 있다는 것을 의미합니다.

확장성: RDS는 데이터베이스 크기와 트래픽에 따라 자동으로 확장할 수 있습니다. 이는 대규모 데이터베이스를 처리하거나 급격한 트래픽 증가에 대응하는 데 매우 유용합니다.

보안: RDS는 데이터베이스 암호화를 지원하며, VPC(Virtual Private Cloud)와 같은 AWS 보안 기능과 통합됩니다. 또한 데이터베이스 로깅과 모니터링을 제공하여 보안을 유지할 수 있습니다.

다양한 데이터베이스 엔진: RDS는 MySQL, PostgreSQL, Oracle, SQL Server, MariaDB 및 Amazon Aurora와 같은 다양한 데이터베이스 엔진을 지원합니다.

비용 효율성: RDS는 필요에 따라 데이터베이스 인스턴스를 생성하고 삭제할 수 있으며, 사용한 만큼만 지불하면 됩니다. 또한 데이터베이스를 복제하여 가용성을 높일 수 있습니다.

<br>

## RDS 고가용성 구현
Amazon RDS는 여러 가용 영역에 걸쳐 데이터베이스를 자동으로 복제하여 고가용성을 제공합니다.<br> 
RDS에서는 다중 AZ 배포라는 기능을 제공하여 사용자가 데이터베이스 인스턴스를 여러 가용 영역에 복제하고 자동 장애 조치(Failover)를 수행할 수 있도록 합니다.

다중 AZ 배포를 사용하면, 데이터베이스 인스턴스의 프라이머리 인스턴스와 세컨더리 인스턴스를 동시에 실행하면서 데이터베이스를 자동으로 복제합니다. <br>
만약 프라이머리 DB 인스턴스가 다운되거나 문제가 발생하면, Amazon RDS는 자동으로 세컨더리 DB 인스턴스를 프라이머리 DB 인스턴스로 승격시키고, DNS 레코드를 업데이트하여 새로운 엔드포인트로 전환합니다.<br> 
이 과정에서 일시적으로 세컨더리 DB 인스턴스는 읽기 전용 모드로 전환됩니다. <br>
따라서 읽기 작업은 계속해서 수행할 수 있지만 쓰기 작업은 대기 상태로 전환됩니다.

이를 통해 하나의 가용 영역에 장애가 발생해도 다른 가용 영역에 있는 세컨더리 인스턴스로 자동 장애 조치(failover)가 이루어져 데이터베이스의 가용성을 높일 수 있습니다.

또한 프라이머리와 세컨더리 인스턴스는 동일한 파라미터 그룹과 보안 그룹을 사용하므로 설정 관리 및 보안 관리를 단순화할 수 있습니다.

이 때, 세컨더리 DB 인스턴스는 대기 상태에 있는 한 작동 시킬 수 없고, 프라이머리 DB 인스턴스와 트래픽 분산도 불가합니다.



## RDS 확장성 구현
수직적 확장
Amazon RDS는 수직적 확장도 가능합니다. 인스턴스 유형을 업그레이드하여 CPU 및 메모리를 확장할 수 있습니다.

수평적 확장
Amazon RDS는 수평적으로 확장이 가능합니다. 샤딩(sharding)을 통해 데이터를 여러 개의 인스턴스에 분산시켜 처리할 수 있으며, 각 인스턴스는 마스터-슬레이브 구조로 운영할 수 있습니다. <br>
이를 통해 트래픽이 증가해도 높은 처리량을 유지할 수 있습니다.

읽기 전용 복제본
Amazon RDS는 읽기 전용 복제본을 생성할 수 있습니다. <br>
이를 통해 읽기 처리량이 많은 경우에도 데이터베이스 부하를 분산시킬 수 있습니다.<br> 
복제본은 마스터 데이터베이스의 모든 데이터를 복제하기 때문에 읽기 작업에 대한 성능 향상이 가능합니다.

자동화된 백업 및 복원
Amazon RDS는 자동화된 백업과 복원을 제공합니다. 이를 통해 데이터 손실 없이 시스템을 빠르게 복구할 수 있습니다.


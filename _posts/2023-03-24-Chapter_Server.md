---
title:  "Server"
excerpt: "DevOps 부트캠프 Section 1 "

categories:
  - Blog
tags:
  - [Blog, DevOps]

toc: true
toc_sticky: true
 
date: 2023-03-24
last_modified_at: 2023-03-24
---
# Server
"웹 서버"는 하드웨어, 소프트웨어 혹은 두 개가 같이 동작하는 것을 의미할 수 있습니다.

1. 하드웨어 측면에서, 웹 서버는 웹 서버의 소프트웨어와 website의 컴포넌트 파일들을 저장하는 컴퓨터입니다. (컴포넌트 파일에는 HTML 문서, images, CSS stylesheets, 그리고 JavaScript files가 있습니다.) 웹 서버는 인터넷에 연결되어 웹에 연결된 다른 기기들이 웹 서버의 데이터(컴포넌트 파일들)를 주고받을 수 있도록 합니다.
2. 소프트웨어 측면에서, 웹 서버는 기본적으로 웹 사용자가 어떻게 호스트 파일들에 접근하는지를 관리합니다. 이 문서에서 웹 서버는 HTTP서버로 국한합니다. HTTP 서버는 URL(Web addresses)과 HTTP(당신의 브라우저가 웹 페이지를 보여주기 위해 사용하는 프로토콜)의 소프트웨어 일부입니다.

브라우저가 웹 서버에서 불려진 파일을 필요로 할때, 브라우저는 HTTP를 통해 파일을 요청합니다. 요청이 올바른 웹 서버(하드웨어)에 도달하였을 때, HTTP 서버(software)는 요청된 문서를 HTTP를 이용해 보내줍니다.

웹 사이트를 공개하기 위해서는, 당신은 정적 혹은 동적 웹 서버가 필요합니다.

정적 웹 서버 혹은 스택은 HTTP 서버 (소프트웨어)가 있는 컴퓨터(하드웨어)로 구성되어 있습니다. 서버가 그 불려진 파일을 당신의 브라우저에게 전송하기 때문에, 저희는 그것을 "정적"이라고 부릅니다.

동적 웹 서버는 정적 웹 서버와 추가적인 소프트웨어(대부분 일반적인 애플리케이션 서버와 데이터베이스)로 구성되어 있습니다. 애플리케이션 서버가 HTTP 서버를 통해 당신의 브라우저에게 불려진 파일들을 전송하기 전에, 애플리케이션 서버가 업데이트하기 때문에 우리는 이것을 동적이라고 부릅니다.

예를 들어, 당신이 브라우저에서 보는 최종 웹페이지들을 생성하기 위해, 애플리케이션 서버는 아마 데이터베이스로 온 컨텐츠들로 이루어진 HTML 템플릿을 채울지 모릅니다. MDN 혹은 Wikipedia와 같은 사이트들은 수 천개의 웹페이지들을 가지고 있지만, 그것들은 실제의 HTML 문서가 아니라 오직 약간의 HTML 템플릿과 엄청 큰 데이터베이스로 되어있습니다. 이 구성은 내용들을 전달하고 관리하기 쉽고 빠르게 만들어 준다.

[출처](https://developer.mozilla.org/ko/docs/Learn/Common_questions/Web_mechanics/What_is_a_web_server) : https://developer.mozilla.org/ko/docs/Learn/Common_questions/Web_mechanics/What_is_a_web_server

<br><br>

## Static Pages vs Dynamic Pages
### Static Pages 
바뀌지 않는 페이지

웹 서버는 파일 경로 이름을 받고, 경로와 일치하는 file contents를 반환함

항상 동일한 페이지를 반환함
> image, html, css, javascript 파일과 같이 컴퓨터에 저장된 파일들

<br><br>

### Dynamic Pages
인자에 따라 바뀌는 페이지

인자의 내용에 맞게 동적인 contents를 반환함

웹 서버에 의해 실행되는 프로그램을 통해 만들어진 결과물임 (Servlet : WAS 위에서 돌아가는 자바 프로그램)

개발자는 Servlet에 doGet() 메소드를 구현함

웹 서버
개념에 있어서 하드웨어와 소프트웨어로 구분된다.

하드웨어 : Web 서버가 설치되어 있는 컴퓨터

소프트웨어 : 웹 브라우저 클라이언트로부터 HTTP 요청을 받고, 정적인 컨텐츠(html, css 등)를 제공하는 컴퓨터 프로그램

<br><br>
![alt text](/images/was.png)

### 웹 서버 기능
Http 프로토콜을 기반으로, 클라이언트의 요청을 서비스하는 기능을 담당 <br>
요청에 맞게 두가지 기능 중 선택해서 제공해야 한다.

- 정적 컨텐츠 제공<br>
WAS를 거치지 않고 바로 자원 제공

- 동적 컨텐츠 제공을 위한 요청 전달<br>
클라이언트 요청을 WAS에 보내고, WAS에서 처리한 결과를 클라이언트에게 전달

웹 서버 종류 : Apache, Nginx, IIS 등

### WAS
Web Application Server의 약자<br>
DB 조회 및 다양한 로직 처리 요구시 동적인 컨텐츠를 제공하기 위해 만들어진 애플리케이션 서버<br>
HTTP를 통해 애플리케이션을 수행해주는 미들웨어다.<br>
WAS는 웹 컨테이너 혹은 서블릿 컨테이너라고도 불림<br>
(컨테이너란 JSP, Servlet을 실행시킬 수 있는 소프트웨어. 즉, WAS는 JSP, Servlet 구동 환경을 제공해줌)


역할<br>
WAS = 웹 서버 + 웹 컨테이너<br>
웹 서버의 기능들을 구조적으로 분리하여 처리하는 역할<br>
보안, 스레드 처리, 분산 트랜잭션 등 분산 환경에서 사용됨 ( 주로 DB 서버와 함께 사용 )

WAS 주요 기능
1. 프로그램 실행 환경 및 DB 접속 기능 제공
2. 여러 트랜잭션 관리 기능
3. 업무 처리하는 비즈니스 로직 수행

WAS 종류 : Tomcat, JBoss 등

웹 서버가 필요한 이유<br>
웹 서버에서는 정적 컨텐츠만 처리하도록 기능 분배를 해서 서버 부담을 줄이는 것<br>

클라이언트가 이미지 파일(정적 컨텐츠)를 보낼 때<br>
웹 문서(html 문서)가 클라이언트로 보내질 때 
이미지 파일과 같은 정적 파일은 함께 보내지지 않음<br>
먼저 html 문서를 받고, 이에 필요한 이미지 파일들을 
다시 서버로 요청해서 받아오는 것<br>
따라서 웹 서버를 통해서 정적인 파일을 
애플리케이션 서버까지 가지 않고 앞단에 빠르게 보낼 수 있다<br><br>

WAS가 필요한 이유<br>
WAS를 통해 요청에 맞는 데이터를 DB에서 가져와 비즈니스 로직에 맞게 그때마다 결과를 만들고 제공하면서 자원을 효율적으로 사용할 수 있음<br>
동적인 컨텐츠를 제공해야 할때<br>
웹 서버만으로는 사용자가 원하는 요청에 대한 결과값을 
모두 미리 만들어놓고 서비스하기에는 자원이 절대적으로 부족함<br>
따라서 WAS를 통해 요청이 들어올 때마다 
DB와 비즈니스 로직을 통해 결과물을 만들어 제공!


### 데이터베이스 서버
데이터베이스 서버란?

예를 들어 쇼핑몰 웹사이트는 사이트 내의 사용자 이름, 나이, 키 등의 개인 정보나 구매 이력 등 데이터 정보를 저장해야 한다.

이 뿐만 아니라 사진, PDF 등 파일들도 데이터로 간주할 수 있다.

이러한 데이터를 저장하고, 잘 사용하기 위해서 이용되는 것이 데이터베이스 서버이다.<br>
DB 정보를 제공하는 서버가 결국 DB 서버이다.


### 프록시 서버
프록시 서버는 인터넷에서 유저를 대신해서 데이터를 가져오는 서버이다. <br>
원래는 클라이언트가 서버에 직접 접근해서 요청한 내용을 가져와야 하지만 <br>
프록시 서버가 대신 서버에 요청하고 클라이언트에게 가져다 준다.

예를 들면 클라이언트에서 naver의 주소를 입력해서 접속을 시도한다.<br>
이 요청은 서버로 가는게 아니라 프록시 서버로 간다. 프록시 서버가 네이버의 서버에 도착해서 웹페이지를 가져다가 클라이언트인 웹브라우저에게 보내주는것이다.<br>
프록시 proxy 에는 '대리' 라는 뜻이 있습니다. 클라이언트를 대리한다는 뜻이다.
<br><br>
프록시 서버의 사용 이유

1. 개인정보를 보호할 수 있다.<br>
프록시 서버 없이 클라이언트가 네이버의 서버에 요청을 할 때 나의 IP 주소도 전달이 된다.<br>
프록시 서버를 사용하면 네이버의 서버는 나의 IP가 아니라 프록시 서버의 IP를 보게 된다.<br> 
즉 네이버 서버 관리부에서는 IP 주소를 보고 어디서 네이버에 접속했는지 알아낼 수 있다. <br>
프록시 서버를 사용하면 나의 IP주소는 네이버 서버에 전달되지 않습니다.

2. 캐시 사용 - 속도향상<br>
프록시 서버가 웹페이지를 가져올 때 자신의 데이터베이스에 최근 데이터를 저장해놓는다. 이것을 캐시라 한다 (Cache)<br>
다른 클라이언트가 접속할 때 캐시된 웹페이지가 있으면 프록시 서버에서 바로 클라이언트에 전송함으로써 속도를 향상 시킬 수 있다. <br>
인터넷으로 갈 필요도 없이 프록시 서버에서 끝나는 것이죠.<br>
프락시 서버에서는 가비지 콜렉션을 해서 캐시 상태를 유지한다. 원본 문서에 대한 캐시도 업데이트하여 클라이언트에 문서의 최신 버전을 전달할 수 있도록 한다.<br>
캐시기능을 사용하면 인터넷으로 데이터를 수집하러 나갈 필요가 없으니까 대역폭을 줄이는 효과도 있다.


3. 로그 기록 관리 <br>
서버에게 개인정보가 보호되지만 프록시 서버에는 클라이언트의 기록이 남아있다.<br>
이 기록들을 보면 어떤 IP에서 어디에 얼마나 오래 접속했는지 기록을 확인할 수 있다.<br>
또 프록시 서버가 방문할 수 있는 웹사이트를 제한할 수 있다.<br>
결국 연결된 클라이언트들의 정보를 제어할 수 있기 때문에 프록시 서버는 회사에서 많이 사용한다.<br>
관리자가 프록시 서버를 열어보면 직원들이 어떤 사이트에 접속했는지 손바닥 처럼 들여다 볼 수 있기 때문이죠.

4. 방화벽
프록시 서버와 방화벽은 다른 것이지만 보안을 위해 함께 일한다.<br>
프락시는 요청을 방화벽은 네트워크 패킷을 제어한다.


5. 접속 우회
프록시 서버는 여러대 연결시킬 수 있다.<br>
클라이언트 -> 프락시 서버1 -> 프락시 서버2 -> 서버 <br>
클라이언트의 IP를 숨기기 위해 여러 프록시 서버를 경유하는 기술을 Proxy Chaining 이라고 한다. <br>
흔히 해커들의 IP주소를 숨기고 공격할 때 쓰는 수법으로 알려져 있지만, <br>
Proxy Chaining 이 완벽한 기술은 아니다. <br>
서버에는 프록시 서버의 주소가 남아있을테니 추적을 거듭하면 클라이언트를 알아낼 수도 있다. 다만 여러 국가의 컴퓨터에 접속해서 우회한다면 상당히 힘들며, 나라마다 정보 보호법이 달라서 서버의 정보를 공개하지 않는 나라도 있다.

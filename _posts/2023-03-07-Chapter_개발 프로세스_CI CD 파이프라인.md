---
title:  "CI/CD 파이프라인"
excerpt: "DevOps 부트캠프 Section 1 "

categories:
  - Blog
tags:
  - [Blog, DevOps]

toc: true
toc_sticky: true
 
date: 2023-03-07
last_modified_at: 2023-03-07
---


# 사전지식
**CI/CD (Continuous Integration/Continuous Delivery)** 는 자동화하여 어플리케이션을 더욱 짧은 주기로 고객에게 제공하는 방법입니다.<br>
 CI/CD의 기본 개념은 지속적인 통합, 지속적인 서비스 제공, 지속적인 배포입니다.<br>
  CI/CD는 새로운 코드 통합으로 인해 개발 및 운영팀에 발생하는 문제(일명 "통합 지옥(integration hell)")를 해결하기 위한 솔루션입니다.<br><br>

CI/CD는 애플리케이션의 통합 및 테스트 단계에서부터 제공 및 배포에 이르는 어플리케이션의 라이프사이클 전체에 걸쳐 지속적인 자동화와 지속적인 모니터링을 제공합니다. <br>
이러한 구축 사례를 일반적으로 “CI/CD 파이프라인”이라 부르며, 개발 및 운영팀의 애자일 방식 협력을 통해 DevOps 또는 SRE 방식으로 지원됩니다.<br><br>

**CD(지속적인 제공, Continuous Delivery)** 이란 개발자들이 애플리케이션에 적용한 변경 사항이 버그 테스트를 거쳐 리포지토리(예: GitHub 또는 컨테이너 레지스트리)에 자동으로 업로드되는 것을 뜻하며, 운영팀은 이 리포지토리에서 애플리케이션을 실시간 프로덕션 환경으로 배포할 수 있습니다. <br>
이는 개발팀과 비즈니스팀 간의 가시성 및 커뮤니케이션 부족 문제를 해결해 줍니다. 그러므로 지속적인 서비스 제공은 최소한의 노력으로 새로운 코드를 배포하는 것을 목표로 합니다.<br><br>

**지속적인 배포(또 다른 의미의 "CD": Continuous Deployment)** 란 개발자의 변경 사항을 리포지토리에서 고객이 사용 가능한 프로덕션 환경까지 자동으로 릴리스하는 것을 의미합니다.<br> 이는 애플리케이션 제공 속도를 저해하는 수동 프로세스로 인한 운영팀의 프로세스 과부하 문제를 해결합니다. <br>
지속적인 배포는 파이프라인의 다음 단계를 자동화함으로써 지속적인 서비스 제공의 장점을 활용합니다.

![alt text](/images/CICD.jpg)<br><br>

CI/CD는 지속적인 통합 및 지속적 제공의 구축 사례만을 지칭할 때도 있고, 지속적 통합, 지속적 제공, 지속적 배포라는 3가지 구축 사례 모두 의미하는 것일 수 있다. 즉, "지속적인 서비스 제공"은 때로 지속적인 배포의 과정까지 포함하는 방식으로 사용되기도 한다.<br><br>

즉, **CI(지속적 통합, Continuous Integration)**를 통해 코드 변경 사항을 공유 브랜치 또는 "트렁크"로 다시 병합하는 작업을 수월하게 자주 수행 가능하다.<br>
개발자가 어플리케이션에 적용한 변경 사항이 병합되면 이러한 변경 사항이 어플리케이션을 손상시키지 않도록 자동으로 어플리케이션을 구축, 테스트를 통해 변경사항이 제대로 적용되었는지 확인한다.<br>
클래스와 기능에서부터 전체 어플리케이션을 구성하는 서로 다른 모듈에 이르기까지 모든 것에 대한 테스트를 수행한다.<br>
이러한 테스트에서 코드간의 충돌이 발생하면 CI를 통해 버그들을 더욱 빠르게 자주 수정 가능하다.<br><br>

CI 이후 이어지는 CD(지속적 제공, Continuous Delivery) 프로세스에서는 유효한 코드를 리포지토리에 자동으로 릴리스한다.<br>
효과적인 CD 프로세스를 실현하기 위해서는 개발 파이프라인에는 CI가 먼저 구축되어야한다.<br>
CD의 목표는 프로덕션 환경으로 배포할 준비가 되어 있는 코드베이스를 확보하는 것이다.<br>
CD의 경우 코드 변경 사항 병합부터 프로덕션에 적합한 빌드 제공에 이르는 모든 단계에는 테스트 자동화와 코드 릴리스 자동화가 포함된다.<br><br>

CI/CD 파이프라인의 끝은 CD(지속적 배포, Continuous Deployment)이다.<br>
프로덕션 준비가 완료된 빌드를 코드 리포지토리에 자동으로 릴리스하는 지속적 제공의 <br>
확장된 형태인 지속적 배포는 어플리케이션을 프로덕션으로 릴리스하는 작업을 자동화한다.<br><br><br>

## **지속적 배포 + 지속적 제공 = 지속적 배포** <br><br><br>

# Action Items
이러한 과정들을 문장으로써 표현해본다면<br>
1. 어플리케이션이 필요한 기능, 요소들을 점검하여 기획한다.
2. 기획된 설계에 따라 필요한 요소들을 코딩한다.
3. 실제 코딩된 요소들을 하나의 어플리케이션으로 빌드시킨다.
4. 설계된 요소들이 빌드되어 명확하게 동작하는지 테스트한다.
5. 테스트 완료된 빌드 버전을 배포한다.
6. 배포된 어플리케이션을 CI/CD를 통해 지속적인 유지 + 소프트웨어의 확장
7. 해당 어플리케이션을 모니터링하여 버그 확인이나 트래픽 등을 확인하여 확장 방향성을 설정한다. (확장, 축소 등)

CI/CD 파이프라인을 7 stage로 구성한다면<br>
1.트리거

새 코드가 리포지토리에 커밋되면 파이프라인이 자동으로 트리거된다.<br>
변경사항을 폴링하도록 파이프라인을 구성하거나 해서 파이프라인이 자동으로 실행되도록 한다.



2.코드 체크아웃<br>
CI에서 코드를 체크한다. <br>
CI/CD 툴은 일반적으로 어떤 특정 커밋이 파이프라인을 트리거했는지 알려주는 웹후크나 폴에서 정보를 받는다.<br>
 파이프라인은 지정된 커밋 지점에서 소스 코드를 확인하고 프로세스를 시작한다.



3.코드 컴파일<br>
컴파일된 언어로 개발하는 경우, 컴파일을 실행한다.<br>
CI 툴이 어플리케이션을 컴파일할 때 모든 빌드 도구에 액세스할 수 있어야한다. 예시로 Gradle같은 것들을 예시로 들 수 있다.



4.단위 테스트 실행<br>
CI/CD 파이프라인의 핵심 요소로써 코드베이스에 있는 테스트를 실행하도록 CI/CD 툴을 구성한다.<br>
이 스테이지의 목표는 모든 단위 테스트가 통과했는지 확인하는 것뿐 아니라 코드베이스가 커짐에 따라 테스트가 유지되고 향상되는지 확인해야한다.<br>
어플리케이션이 성장하고 있음에도 테스트가 동일하게 유지되는경우, 테스트되지 않는 코드들이 있음을 의미할 수 있다.



5.코드 패키징<br>
테스트를 통과하면 패키징으로 넘어간다.<br>
어떤 패키징 형식을 선택하든 바이너리를 한 번만 빌드하는 것이 좋다. 안그러면 파이프라인이 복잡해지기 때문이다.



6.승인 테스트 실행<br>
승인 테스트란 소프트웨어가 의도한 바를 수행하고 원래 요구 사항을 충족하는지 확인하는 방법이다.<br>
시간이 많이걸리는 과정이지만, 자동화된 테스트를 수행할 수 있는 방법이 많아지고 있다.



7.배송 또는 배포<br>
어플리케이션이 테스트되면 제공 또는 배포 단계로 이동한다.<br>
이 단계에서는 어플리케이션은 배포할 준비가 되었으며, (여기까지가 지속적인 제공) 혹은 소프트웨어를 자동으로 배포(지속적 배포)할 수 있다.

